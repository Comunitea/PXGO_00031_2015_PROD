<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="report_saleorder_document_custom" inherit_id="sale.report_saleorder_document">
            <xpath expr="//h2" position="replace">
                <h3>
                    <span t-if="o.state not in ['draft','sent']">Order N° </span>
                    <span t-if="o.state in ['draft','sent']">Quotation N° </span>
                    <span t-field="o.name"/>
                </h3>
                <h4 t-if="o.title">
                    <span t-field="o.title"/>
                </h4>
            </xpath>

            <xpath expr="//div[@t-if='o.user_id.name']" position="before">
                <div t-if="o.delivery_date" class="col-xs-3">
                    <strong>Delivery Date:</strong>
                    <p t-field="o.delivery_date"/>
                </div>
            </xpath>

            <xpath expr="//div[@class='col-xs-6']/.." position="attributes">
                <attribute name="t-if">o.state not in ('draft', 'sent')</attribute>
            </xpath>

            <xpath expr="//p[@t-field='o.note']" position="before">
                <strong t-if="o.note">Notes</strong>
            </xpath>

            <xpath expr="//div[@t-if='o.payment_term']" position="replace">
            </xpath>
            <xpath expr="//div[@t-if='o.date_order']/p" position="replace">
                <p t-field="o.date_order_without_hour"/>
            </xpath>
            <xpath expr="//th[text()='Taxes']" position="attributes">
                <attribute name="t-if">o.state not in ('draft', 'sent')</attribute>
            </xpath>

            <xpath expr="//tr[@t-foreach='o.order_line']/td[2]" position="attributes">
                <attribute name="t-if">o.state not in ('draft', 'sent')</attribute>
            </xpath>

            <xpath expr="//tr[@class='border-black'][1]" position="attributes">
                <attribute name="t-if">o.state not in ('draft', 'sent')</attribute>
            </xpath>
            <xpath expr="//span[@t-field='o.amount_tax']/../.." position="attributes">
                <attribute name="t-if">o.state not in ('draft', 'sent')</attribute>
            </xpath>

            <xpath expr="//span[@t-field='o.amount_total']/.." position="attributes">
                <attribute name="t-if">o.state not in ('draft', 'sent')</attribute>
            </xpath>
            <xpath expr="//span[@t-field='o.amount_total']/../../.." position="attributes">
                <attribute name="t-if">not not_total</attribute>
            </xpath>
            <xpath expr="//span[@t-field='o.amount_total']/.." position="after">
                <td class="text-right" t-if="o.state in ('draft', 'sent')">
                    <span t-field="o.amount_untaxed"
                        t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}'/>
                </td>
            </xpath>
        </template>
    </data>
</openerp>
